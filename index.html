<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zootube | Mobile Fit Edition</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --bg-color: #0f0f0f;
            --header-bg: #0f0f0f;
            --search-bg: #121212;
            --border-color: #303030;
            --text-main: #ffffff;
            --chip-bg: #272727;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', Arial, sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-main); overflow-x: hidden; }
        
        /* --- HEADER (Compact for Mobile) --- */
        header {
            position: fixed; top: 0; left: 0; width: 100%; 
            height: 50px; /* Thoda chota kiya taaki fit aaye */
            background: var(--header-bg);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px; /* Side padding kam ki */
            z-index: 1000;
            border-bottom: 1px solid #222;
        }

        .start-section { display: flex; align-items: center; gap: 10px; }
        
        /* LOGO SETTINGS */
        .logo { display: flex; align-items: center; cursor: pointer; }
        .logo img { 
            height: 35px; /* Desktop size */
            width: auto; 
            object-fit: contain; 
        }

        /* SEARCH BAR (Desktop) */
        .search-container { 
            display: flex; align-items: center; flex: 0 1 500px; margin-left: 20px; 
        }
        .search-box { display: flex; width: 100%; position: relative; }
        .search-box input {
            width: 100%; padding: 0 16px; height: 35px;
            background: var(--search-bg); border: 1px solid var(--border-color);
            border-right: none; border-radius: 40px 0 0 40px;
            color: white; font-size: 14px; outline: none;
        }
        .search-btn {
            height: 35px; width: 50px;
            background: #222; border: 1px solid var(--border-color);
            border-radius: 0 40px 40px 0; color: white; cursor: pointer;
            display: grid; place-items: center;
        }
        .mic-icon {
            width: 35px; height: 35px; border-radius: 50%; background: #181818;
            border: none; color: white; margin-left: 10px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }

        /* MOBILE ICONS */
        .mobile-search-trigger { display: none; color: white; font-size: 18px; background: none; border: none; cursor: pointer; padding: 5px;}
        .avatar { 
            width: 30px; height: 30px; border-radius: 50%; background: #555; 
            display: flex; justify-content: center; align-items: center; font-size: 14px; 
        }

        /* --- SEARCH OVERLAY (MOBILE) --- */
        .search-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: var(--bg-color); z-index: 2000;
            display: none; flex-direction: column;
        }
        .search-header-bar {
            display: flex; align-items: center; gap: 5px; padding: 8px;
            border-bottom: 1px solid #333; background: #121212;
        }
        .back-btn { background: none; border: none; color: white; font-size: 18px; padding: 10px; cursor: pointer; }
        
        .overlay-input-box {
            flex: 1; display: flex; background: #222; border-radius: 20px; padding: 0 12px; align-items: center; height: 36px;
        }
        .overlay-input-box input {
            background: transparent; border: none; color: white; width: 100%; outline: none; font-size: 14px;
        }
        .overlay-mic {
            background: #222; border: none; color: white; width: 36px; height: 36px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; margin-left: 5px;
        }

        /* Suggestions */
        .search-content { padding: 15px; overflow-y: auto; }
        .section-label { font-size: 13px; font-weight: bold; color: #aaa; margin-bottom: 8px; margin-top: 8px; }
        .suggestion-item { display: flex; align-items: center; gap: 15px; padding: 10px 0; cursor: pointer; border-bottom: 1px solid #1f1f1f; }
        .suggestion-item i { color: #aaa; font-size: 14px; }
        .suggestion-text { font-size: 14px; font-weight: 500; }

        .viral-grid { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
        .viral-card { min-width: 140px; cursor: pointer; }
        .viral-thumb { width: 100%; aspect-ratio: 16/9; background: #333; border-radius: 6px; overflow: hidden; }
        .viral-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .viral-title { font-size: 12px; margin-top: 5px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; color: #ccc;}

        /* --- MAIN CONTENT --- */
        .container { display: flex; margin-top: 50px; /* Header height match */ }
        
        .sidebar {
            width: 220px; background: var(--bg-color); height: calc(100vh - 50px);
            position: fixed; padding: 10px; overflow-y: auto;
        }
        .nav-item {
            display: flex; align-items: center; gap: 15px; padding: 8px 10px;
            border-radius: 8px; color: white; text-decoration: none; font-size: 13px; margin-bottom: 2px;
        }
        .nav-item:hover { background: #272727; }
        .nav-item.active { background: #272727; font-weight: bold; }

        .content { margin-left: 220px; flex: 1; padding: 15px; }
        
        .categories { 
            display: flex; gap: 8px; overflow-x: auto; padding-bottom: 8px; 
            position: sticky; top: 50px; background: var(--bg-color); z-index: 10; padding-top: 8px; 
        }
        .categories::-webkit-scrollbar { height: 0; }
        .chip {
            background: var(--chip-bg); color: white; padding: 5px 12px; border-radius: 8px; 
            border: none; white-space: nowrap; cursor: pointer; font-size: 13px; transition: 0.2s;
        }
        .chip.active { background: #f1f1f1; color: black; }

        .video-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; margin-top: 15px;
        }
        .card { cursor: pointer; margin-bottom: 10px; }
        .thumbnail { width: 100%; aspect-ratio: 16/9; background: #222; border-radius: 10px; overflow: hidden; }
        .thumbnail img { width: 100%; height: 100%; object-fit: cover; }
        .info { margin-top: 8px; display: flex; gap: 10px; }
        .details h4 { font-size: 14px; margin-bottom: 3px; line-height: 1.2; font-weight: 500; }
        .details p { font-size: 12px; color: #aaa; }

        /* PLAYER */
        .player-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 3000; justify-content: center; align-items: center; flex-direction: column;
        }
        .iframe-box { width: 100%; max-width: 900px; aspect-ratio: 16/9; }
        iframe { width: 100%; height: 100%; border: none; }
        .close-btn { margin-top: 20px; padding: 8px 20px; background: #333; color: white; border: none; cursor: pointer; border-radius: 20px; font-size: 14px; }

        /* --- MOBILE ADJUSTMENTS (FIT LOGIC) --- */
        @media (max-width: 768px) {
            /* Header Fit */
            header { height: 50px; padding: 0 8px; }
            .container { margin-top: 50px; }
            
            /* Logo chota kiya mobile ke liye */
            .logo img { height: 28px; } 

            .search-container { display: none; } /* Hide Desktop Search */
            .mobile-search-trigger { display: block; } /* Show Mobile Icon */
            
            .sidebar { display: none; } /* Hide Sidebar */
            .content { margin-left: 0; padding: 10px; }
            
            /* Grid for mobile (1 video per row usually looks better, or small 2) */
            .video-grid { grid-template-columns: 1fr; gap: 20px; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header id="mainHeader">
        <div class="start-section">
            <!-- NEW LOGO (Responsive Size) -->
            <div class="logo" onclick="window.location.reload()">
                <img src="https://i.supaimg.com/f25eb9da-5856-46df-acba-182641a77cc9.png" alt="Zootube">
            </div>
        </div>

        <!-- Desktop Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="desktopSearchInput" placeholder="Search">
                <button class="search-btn" onclick="desktopSearch()"><i class="fas fa-search"></i></button>
            </div>
            <button class="mic-icon" onclick="activateMic()"><i class="fas fa-microphone"></i></button>
        </div>

        <!-- Right Side Icons -->
        <div style="display: flex; gap: 15px; align-items: center;">
            <button class="mobile-search-trigger" onclick="openSearchOverlay()">
                <i class="fas fa-search"></i>
            </button>
            <div class="avatar">Z</div>
        </div>
    </header>

    <!-- MOBILE SEARCH OVERLAY -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-header-bar">
            <button class="back-btn" onclick="closeSearchOverlay()"><i class="fas fa-arrow-left"></i></button>
            <div class="overlay-input-box">
                <input type="text" id="mobileSearchInput" placeholder="Search YouTube...">
            </div>
            <button class="overlay-mic" onclick="activateMic()"><i class="fas fa-microphone"></i></button>
        </div>

        <div class="search-content">
            <!-- Suggestions -->
            <div class="section-label">ðŸ”¥ Trending Now</div>
            <div class="suggestion-item" onclick="triggerSearch('Pakistani Dramas 2024')">
                <i class="fas fa-search"></i> <span class="suggestion-text">Pakistani Dramas 2024</span>
            </div>
            <div class="suggestion-item" onclick="triggerSearch('New Songs 2024')">
                <i class="fas fa-music"></i> <span class="suggestion-text">New Songs 2024</span>
            </div>
            <div class="suggestion-item" onclick="triggerSearch('Cricket Highlights')">
                <i class="fas fa-trophy"></i> <span class="suggestion-text">Cricket Highlights</span>
            </div>

            <!-- Viral Grid (Smaller for fit) -->
            <div class="section-label" style="margin-top: 20px;">ðŸ“º Viral Videos</div>
            <div class="viral-grid">
                <div class="viral-card" onclick="triggerSearch('Tere Bin Drama')">
                    <div class="viral-thumb"><img src="https://i.ytimg.com/vi/qJ4Xy5s_x7Y/hq720.jpg"></div>
                    <div class="viral-title">Tere Bin - Last Episode</div>
                </div>
                <div class="viral-card" onclick="triggerSearch('Ducky Bhai')">
                    <div class="viral-thumb"><img src="https://i.ytimg.com/vi/k6k1j1j1/hqdefault.jpg"></div>
                    <div class="viral-title">Ducky Bhai New Vlog</div>
                </div>
                <div class="viral-card" onclick="triggerSearch('Coke Studio')">
                    <div class="viral-thumb"><img src="https://i.ytimg.com/vi/zQp1p1p1/hqdefault.jpg"></div>
                    <div class="viral-title">Coke Studio Season 15</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <a href="#" class="nav-item active" onclick="loadCategory('Trending')"><i class="fas fa-home"></i> Home</a>
            <a href="#" class="nav-item" onclick="loadCategory('Shorts')"><i class="fas fa-bolt"></i> Shorts</a>
            <a href="#" class="nav-item" onclick="loadCategory('Music')"><i class="fas fa-music"></i> Music</a>
            <a href="#" class="nav-item" onclick="loadCategory('Gaming')"><i class="fas fa-gamepad"></i> Gaming</a>
        </nav>

        <!-- Content -->
        <div class="content">
            <div class="categories">
                <button class="chip active" onclick="loadCategory('Trending Videos', this)">All</button>
                <button class="chip" onclick="loadCategory('Pakistani Dramas', this)">Dramas</button>
                <button class="chip" onclick="loadCategory('News Live', this)">News</button>
                <button class="chip" onclick="loadCategory('Cricket', this)">Sports</button>
                <button class="chip" onclick="loadCategory('Cartoons', this)">Kids</button>
                <button class="chip" onclick="loadCategory('Coding', this)">Coding</button>
            </div>
            
            <h3 id="pageTitle" style="margin-top: 10px; font-size: 18px;">Home</h3>
            <div class="video-grid" id="videoGrid"></div>
        </div>
    </div>

    <!-- Video Player -->
    <div class="player-overlay" id="vidModal">
        <div class="iframe-box">
            <iframe id="playerFrame" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <button class="close-btn" onclick="closeVideo()">Close Player</button>
    </div>

    <script>
        const API_URL = "https://api.xyro.site/search/youtube?q=";

        window.onload = function() {
            loadCategory('Trending Videos', document.querySelector('.chip'));
        }

        // Overlay Logic
        function openSearchOverlay() {
            document.getElementById('searchOverlay').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            setTimeout(() => document.getElementById('mobileSearchInput').focus(), 100);
        }
        function closeSearchOverlay() {
            document.getElementById('searchOverlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        function triggerSearch(query) {
            closeSearchOverlay();
            loadCategory(query, null);
        }
        function activateMic() { alert("Listening... ðŸŽ™ï¸"); }

        // Fetch Logic
        async function loadCategory(query, btn) {
            if(btn) {
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
            }
            document.getElementById('pageTitle').innerText = query === 'Trending Videos' ? 'Home' : query;
            const grid = document.getElementById('videoGrid');
            grid.innerHTML = '<p style="color:#aaa;">Loading...</p>';

            try {
                const res = await fetch(API_URL + encodeURIComponent(query));
                const json = await res.json();
                let videos = json.result || json.data || json;

                grid.innerHTML = '';
                if(!videos || videos.length === 0) {
                    grid.innerHTML = '<p>No results.</p>'; return;
                }

                videos.forEach(vid => {
                    let videoId = null;
                    if(vid.link && vid.link.includes('v=')) videoId = vid.link.split('v=')[1].split('&')[0];

                    if(videoId) {
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.onclick = () => playVideo(videoId);
                        const thumb = vid.imageUrl || `https://i.ytimg.com/vi/${videoId}/hq720.jpg`;
                        const avatarLetter = (vid.channel || 'Z').charAt(0);

                        card.innerHTML = `
                            <div class="thumbnail"><img src="${thumb}"></div>
                            <div class="info">
                                <div class="avatar" style="min-width:30px;">${avatarLetter}</div>
                                <div class="details">
                                    <h4>${vid.title}</h4>
                                    <p>${vid.channel || 'Channel'} â€¢ 1M views</p>
                                </div>
                            </div>
                        `;
                        grid.appendChild(card);
                    }
                });
            } catch (e) { console.error(e); grid.innerHTML = '<p>Error.</p>'; }
        }

        function playVideo(id) {
            document.getElementById('playerFrame').src = `https://www.youtube.com/embed/${id}?autoplay=1`;
            document.getElementById('vidModal').style.display = 'flex';
        }
        function closeVideo() {
            document.getElementById('vidModal').style.display = 'none';
            document.getElementById('playerFrame').src = "";
        }

        // Enter Key Events
        document.getElementById('desktopSearchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') loadCategory(this.value, null);
        });
        document.getElementById('mobileSearchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') triggerSearch(this.value);
        });
        function desktopSearch() {
            const val = document.getElementById('desktopSearchInput').value;
            if(val) loadCategory(val, null);
        }
    </script>
</body>
</html>
