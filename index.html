<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zootube | Mobile Search Edition</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --bg-color: #0f0f0f;
            --bg-secondary: #1f1f1f;
            --header-bg: #0f0f0f;
            --search-bg: #121212;
            --border-color: #303030;
            --text-main: #ffffff;
            --text-secondary: #aaaaaa;
            --accent-color: #3ea6ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', Arial, sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-main); overflow-x: hidden; }
        
        /* --- HEADER --- */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: 56px;
            background: var(--header-bg);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 16px; z-index: 1000;
        }

        .start-section { display: flex; align-items: center; gap: 15px; }
        .logo { display: flex; align-items: center; cursor: pointer; }
        .logo img { height: 40px; width: auto; }

        /* DESKTOP SEARCH (Hidden on Mobile) */
        .search-container { 
            display: flex; align-items: center; flex: 0 1 600px; margin-left: 40px; 
        }
        .search-box { display: flex; width: 100%; position: relative; }
        .search-box input {
            width: 100%; padding: 0 16px; height: 40px;
            background: var(--search-bg); border: 1px solid var(--border-color);
            border-right: none; border-radius: 40px 0 0 40px;
            color: white; font-size: 16px; outline: none;
        }
        .search-btn {
            height: 40px; width: 64px;
            background: #222; border: 1px solid var(--border-color);
            border-radius: 0 40px 40px 0; color: white; cursor: pointer;
            display: grid; place-items: center;
        }
        .mic-icon {
            width: 40px; height: 40px; border-radius: 50%; background: #181818;
            border: none; color: white; margin-left: 10px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; font-size: 18px;
        }
        .mic-icon:hover { background: #303030; }

        /* MOBILE ICONS */
        .mobile-search-trigger { display: none; color: white; font-size: 20px; background: none; border: none; cursor: pointer; }

        /* --- SEARCH OVERLAY (MOBILE STYLE) --- */
        .search-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: var(--bg-color); z-index: 2000;
            display: none; flex-direction: column;
        }
        .search-header-bar {
            display: flex; align-items: center; gap: 10px; padding: 10px;
            border-bottom: 1px solid #333; background: #121212;
        }
        .back-btn { background: none; border: none; color: white; font-size: 20px; padding: 10px; cursor: pointer; }
        
        .overlay-input-box {
            flex: 1; display: flex; background: #222; border-radius: 20px; padding: 0 15px; align-items: center; height: 40px;
        }
        .overlay-input-box input {
            background: transparent; border: none; color: white; width: 100%; outline: none; font-size: 16px;
        }
        
        .overlay-mic {
            background: #222; border: none; color: white; width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; margin-left: 5px; cursor: pointer;
        }

        /* Suggestions Content */
        .search-content { padding: 15px; overflow-y: auto; }
        .section-label { font-size: 14px; font-weight: bold; color: #aaa; margin-bottom: 10px; margin-top: 10px; }
        
        .suggestion-item {
            display: flex; align-items: center; gap: 15px; padding: 12px 0; cursor: pointer;
        }
        .suggestion-item i { color: #aaa; }
        .suggestion-text { font-size: 16px; font-weight: 500; }

        .viral-grid { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
        .viral-card { min-width: 160px; cursor: pointer; }
        .viral-thumb { width: 100%; aspect-ratio: 16/9; background: #333; border-radius: 8px; overflow: hidden; }
        .viral-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .viral-title { font-size: 13px; margin-top: 5px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* --- MAIN LAYOUT --- */
        .container { display: flex; margin-top: 56px; }
        
        .sidebar {
            width: 240px; background: var(--bg-color); height: calc(100vh - 56px);
            position: fixed; padding: 10px; overflow-y: auto;
        }
        .nav-item {
            display: flex; align-items: center; gap: 20px; padding: 10px 12px;
            border-radius: 10px; color: white; text-decoration: none; font-size: 14px;
        }
        .nav-item:hover { background: #272727; }
        .nav-item.active { background: #272727; font-weight: bold; }

        .content { margin-left: 240px; flex: 1; padding: 20px; }
        
        .categories { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; position: sticky; top: 56px; background: var(--bg-color); z-index: 10; padding-top: 10px; }
        .categories::-webkit-scrollbar { height: 0; }
        .chip {
            background: #272727; color: white; padding: 6px 12px; border-radius: 8px; 
            border: none; white-space: nowrap; cursor: pointer; transition: 0.2s;
        }
        .chip.active { background: #f1f1f1; color: black; }

        .video-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;
        }
        .card { cursor: pointer; }
        .thumbnail { width: 100%; aspect-ratio: 16/9; background: #222; border-radius: 12px; overflow: hidden; }
        .thumbnail img { width: 100%; height: 100%; object-fit: cover; }
        .info { margin-top: 10px; display: flex; gap: 10px; }
        .avatar { width: 36px; height: 36px; border-radius: 50%; background: #444; display: flex; justify-content: center; align-items: center; }
        .details h4 { font-size: 16px; margin-bottom: 4px; line-height: 1.2; }
        .details p { font-size: 12px; color: #aaa; }

        /* PLAYER */
        .player-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 3000; justify-content: center; align-items: center; flex-direction: column;
        }
        .iframe-box { width: 100%; max-width: 900px; aspect-ratio: 16/9; }
        iframe { width: 100%; height: 100%; border: none; }
        .close-btn { margin-top: 20px; padding: 10px 20px; background: #333; color: white; border: none; cursor: pointer; border-radius: 20px; }

        /* --- RESPONSIVE / MOBILE --- */
        @media (max-width: 768px) {
            .search-container { display: none; } /* Hide Desktop Search */
            .mobile-search-trigger { display: block; } /* Show Mobile Search Icon */
            .sidebar { display: none; } /* Hide Sidebar */
            .content { margin-left: 0; padding: 10px; }
            .logo img { height: 35px; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header id="mainHeader">
        <div class="start-section">
            <div class="logo" onclick="window.location.reload()">
                <img src="https://i.supaimg.com/913d801b-4b84-42f2-80b9-d21530bdb099.png" alt="Zootube">
            </div>
        </div>

        <!-- Desktop Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="desktopSearchInput" placeholder="Search">
                <button class="search-btn" onclick="desktopSearch()"><i class="fas fa-search"></i></button>
            </div>
            <!-- Mic Button for Desktop -->
            <button class="mic-icon" onclick="activateMic()"><i class="fas fa-microphone"></i></button>
        </div>

        <div style="display: flex; gap: 20px; align-items: center;">
            <!-- Mobile Search Icon Trigger -->
            <button class="mobile-search-trigger" onclick="openSearchOverlay()">
                <i class="fas fa-search"></i>
            </button>
            <div class="avatar">Z</div>
        </div>
    </header>

    <!-- MOBILE SEARCH OVERLAY (Full Screen) -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-header-bar">
            <button class="back-btn" onclick="closeSearchOverlay()"><i class="fas fa-arrow-left"></i></button>
            <div class="overlay-input-box">
                <input type="text" id="mobileSearchInput" placeholder="Search YouTube...">
            </div>
            <button class="overlay-mic" onclick="activateMic()"><i class="fas fa-microphone"></i></button>
        </div>

        <!-- Search Suggestions / Viral Content Area -->
        <div class="search-content">
            
            <!-- Trending Tags -->
            <div class="section-label">ðŸ”¥ Trending Searches</div>
            <div class="suggestion-item" onclick="triggerSearch('Pakistani Dramas 2024')">
                <i class="fas fa-fire"></i>
                <div class="suggestion-text">Pakistani Dramas 2024</div>
            </div>
            <div class="suggestion-item" onclick="triggerSearch('Imran Khan News')">
                <i class="fas fa-newspaper"></i>
                <div class="suggestion-text">Imran Khan Latest News</div>
            </div>
            <div class="suggestion-item" onclick="triggerSearch('Cricket Highlights')">
                <i class="fas fa-baseball-ball"></i>
                <div class="suggestion-text">Cricket Match Highlights</div>
            </div>
            <div class="suggestion-item" onclick="triggerSearch('Funny Vines')">
                <i class="fas fa-laugh"></i>
                <div class="suggestion-text">Funny Viral Vines</div>
            </div>

            <hr style="border-color: #333; margin: 15px 0;">

            <!-- Viral Videos Preview -->
            <div class="section-label">ðŸ“º Viral Dramas & Clips</div>
            <div class="viral-grid">
                <!-- Static Suggestions for "Viral" look -->
                <div class="viral-card" onclick="triggerSearch('Tere Bin Drama')">
                    <div class="viral-thumb">
                        <img src="https://i.ytimg.com/vi/qJ4Xy5s_x7Y/hq720.jpg" alt="Drama">
                    </div>
                    <div class="viral-title">Tere Bin - Last Episode | Viral Drama</div>
                </div>
                <div class="viral-card" onclick="triggerSearch('Ducky Bhai Vlog')">
                    <div class="viral-thumb">
                        <img src="https://i.ytimg.com/vi/k6k1j1j1/hqdefault.jpg" alt="Vlog">
                    </div>
                    <div class="viral-title">Ducky Bhai New Vlog - Trending</div>
                </div>
                <div class="viral-card" onclick="triggerSearch('Coke Studio')">
                    <div class="viral-thumb">
                        <img src="https://i.ytimg.com/vi/zQp1p1p1/hqdefault.jpg" alt="Song">
                    </div>
                    <div class="viral-title">Coke Studio Season 15 | Latest Song</div>
                </div>
            </div>

        </div>
    </div>

    <!-- Main Layout -->
    <div class="container">
        <nav class="sidebar">
            <a href="#" class="nav-item active" onclick="loadCategory('Trending')"><i class="fas fa-home"></i> Home</a>
            <a href="#" class="nav-item" onclick="loadCategory('Shorts')"><i class="fas fa-bolt"></i> Shorts</a>
            <a href="#" class="nav-item" onclick="loadCategory('Music')"><i class="fas fa-music"></i> Music</a>
            <a href="#" class="nav-item" onclick="loadCategory('Gaming')"><i class="fas fa-gamepad"></i> Gaming</a>
        </nav>

        <div class="content">
            <div class="categories">
                <button class="chip active" onclick="loadCategory('Trending Videos', this)">All</button>
                <button class="chip" onclick="loadCategory('Pakistani Dramas', this)">Dramas</button>
                <button class="chip" onclick="loadCategory('News Live Pakistan', this)">News</button>
                <button class="chip" onclick="loadCategory('Cricket', this)">Cricket</button>
                <button class="chip" onclick="loadCategory('Natok', this)">Natok</button>
                <button class="chip" onclick="loadCategory('Cartoons', this)">Kids</button>
            </div>
            
            <h3 id="pageTitle" style="margin-top: 10px;">Home</h3>
            <div class="video-grid" id="videoGrid"></div>
        </div>
    </div>

    <!-- Video Player -->
    <div class="player-overlay" id="vidModal">
        <div class="iframe-box">
            <iframe id="playerFrame" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <button class="close-btn" onclick="closeVideo()">Close Player</button>
    </div>

    <script>
        const API_URL = "https://api.xyro.site/search/youtube?q=";

        window.onload = function() {
            loadCategory('Trending Videos', document.querySelector('.chip'));
        }

        // --- SEARCH OVERLAY FUNCTIONS ---
        function openSearchOverlay() {
            // Show overlay, hide scroll
            document.getElementById('searchOverlay').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            // Focus input
            setTimeout(() => document.getElementById('mobileSearchInput').focus(), 100);
        }

        function closeSearchOverlay() {
            document.getElementById('searchOverlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Used when clicking suggestions inside overlay
        function triggerSearch(query) {
            closeSearchOverlay();
            loadCategory(query, null);
        }

        // Mic Function (Visual)
        function activateMic() {
            alert("Listening... ðŸŽ™ï¸ (Voice Search is active)");
        }

        // --- FETCH LOGIC ---
        async function loadCategory(query, btn) {
            if(btn) {
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
            }
            
            document.getElementById('pageTitle').innerText = query === 'Trending Videos' ? 'Home' : query;
            const grid = document.getElementById('videoGrid');
            grid.innerHTML = '<p style="color:#aaa;">Loading content...</p>';

            try {
                const res = await fetch(API_URL + encodeURIComponent(query));
                const json = await res.json();
                let videos = json.result || json.data || json;

                grid.innerHTML = '';
                if(!videos || videos.length === 0) {
                    grid.innerHTML = '<p>No results found.</p>';
                    return;
                }

                videos.forEach(vid => {
                    let videoId = null;
                    if(vid.link && vid.link.includes('v=')) {
                        videoId = vid.link.split('v=')[1].split('&')[0];
                    }

                    if(videoId) {
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.onclick = () => playVideo(videoId);
                        
                        const thumb = vid.imageUrl || `https://i.ytimg.com/vi/${videoId}/hq720.jpg`;
                        const avatarLetter = (vid.channel || 'Z').charAt(0);

                        card.innerHTML = `
                            <div class="thumbnail">
                                <img src="${thumb}" alt="thumb">
                            </div>
                            <div class="info">
                                <div class="avatar">${avatarLetter}</div>
                                <div class="details">
                                    <h4>${vid.title}</h4>
                                    <p>${vid.channel || 'Channel'} â€¢ ${Math.floor(Math.random()*100)}K views</p>
                                </div>
                            </div>
                        `;
                        grid.appendChild(card);
                    }
                });

            } catch (e) {
                console.error(e);
                grid.innerHTML = '<p>Error loading.</p>';
            }
        }

        function playVideo(id) {
            document.getElementById('playerFrame').src = `https://www.youtube.com/embed/${id}?autoplay=1`;
            document.getElementById('vidModal').style.display = 'flex';
        }
        function closeVideo() {
            document.getElementById('vidModal').style.display = 'none';
            document.getElementById('playerFrame').src = "";
        }

        // Desktop Search Enter Key
        document.getElementById('desktopSearchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') loadCategory(this.value, null);
        });

        // Mobile Search Enter Key
        document.getElementById('mobileSearchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') triggerSearch(this.value);
        });

        function desktopSearch() {
            const val = document.getElementById('desktopSearchInput').value;
            if(val) loadCategory(val, null);
        }
    </script>
</body>
</html>
